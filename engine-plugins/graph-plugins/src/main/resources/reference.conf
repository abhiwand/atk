intel.analytics.component.archives {
  graph-plugins {
    parent = "engine-core"
    config-path = "plugins.graph-plugins"
  }
}

plugins.graph-plugins {

  extra-classpath = [${intel.analytics.engine.hbase.configuration.path}, ${intel.analytics.engine.hadoop.configuration.path}]


  command {
    available = [ "graphs.query.gremlin",
      "graphs.query.histogram",
      "graphs.query.recommend"
      "graphs.annotate_degrees",
      "graphs.annotate_weighted_degrees",
      "graphs.clustering_coefficient",
      "graphs.addedgesplugin",
      "graphs.addverticesplugin",
      "graphs.copygraphplugin",
      "graphs.defineedgeplugin",
      "graphs.definevertexplugin",
      "graphs.edgecountplugin",
      "graphs.exporttographplugin",
      "graphs.exporttotitangraphplugin",
      "graphs.filterverticesplugin",
      "graphs.graphinfoplugin",
      "graphs.loadgraphplugin",
      "graphs.renamegraphplugin",
      "graphs.vertexcountplugin",
      "graphs.ml.belief_propagation",
      "graphs.ml.kclique_percolation",
      "graphs.graphx_pagerank",
      "graphs.graphx_triangle_count",
      "graphs.graphx_connected_components",
      "graphs.sampling.assign_sample",
      "graphs.sampling.vertex_sample",
      "graphs.hierarchical_clustering",
      "graphs.rename_graph"
    ]


    graphs {

      query {
        gremlin {
          class = "com.intel.intelanalytics.engine.spark.graph.query.GremlinQuery"
          config {
            default-timeout = ${intel.analytics.engine.default-timeout}
            titan = ${intel.analytics.engine.titan}
            graphson-mode = "normal" # Valid values: "normal", "compact", "extended"
          }
        }
        histogram {
          class = "com.intel.intelanalytics.engine.spark.graph.query.roc.HistogramQuery"
          config {
            default-timeout = ${intel.analytics.engine.default-timeout}
            titan = ${intel.analytics.engine.titan}
            histogram-buckets = 30
            enable-roc = "false"
            roc-threshold = [0, 0.05, 1]
          }
        }
        recommend {
          class = "com.intel.intelanalytics.engine.spark.graph.query.recommend.RecommendQuery"
          config {
            default-timeout = ${intel.analytics.engine.default-timeout}
            titan = ${intel.analytics.engine.titan}
            vertex_type = "L"
            output_vertex_property_list = "als_result"
            vertex_type_property_key = "vertex_type"
            edge_type_property_key = "splits"
            vector_value = "true"
            bias_on = "false"
            train_str = "TR"
            num_output_results = 10
            left_vertex_name = "user"
            right_vertex_name = "movie"
            left_vertex_id_property_key = "user_id"
            right_vertex_id_property_key = "movie_id"
          }
        }
      }

      ml {
        belief_propagation {
          class = "com.intel.spark.graphon.beliefpropagation.BeliefPropagationPlugin"
          config {
            titan = ${intel.analytics.engine.titan}
          }
        }

        kclique_percolation {
          class = "com.intel.spark.graphon.communitydetection.kclique.KCliquePercolationPlugin"
          config {
            titan = ${intel.analytics.engine.titan}
          }
        }

      }

      sampling {
        vertex_sample {
          class = "com.intel.spark.graphon.sampling.VertexSample"
          config {
            titan = ${intel.analytics.engine.titan}
          }
        }
        assign_sample {
          class = "com.intel.spark.graphon.sampling.AssignSampleTitanPlugin"
          config {
            titan = ${intel.analytics.engine.titan}
          }
        }
      }

      clustering_coefficient {
        class = "com.intel.spark.graphon.clusteringcoefficient.ClusteringCoefficientPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      addedgesplugin { 
        class = "com.intel.intelanalytics.engine.spark.graph.plugins.AddEdgesPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      addverticesplugin {
        class = "com.intel.intelanalytics.engine.spark.graph.plugins.AddVerticesPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      copygraphplugin {
        class = "com.intel.intelanalytics.engine.spark.graph.plugins.CopyGraphPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      defineedgeplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.DefineEdgePlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      definevertexplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.DefineVertexPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      edgecountplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.EdgeCountPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      exporttographplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.exportfromtitan.ExportToGraphPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      exporttotitangraphplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.ExportToTitanGraphPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      filterverticesplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.FilterVerticesPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      graphinfoplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.GraphInfoPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      loadgraphplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.LoadGraphPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      renamegraphplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.RenameGraphPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      vertexcountplugin { class = "com.intel.intelanalytics.engine.spark.graph.plugins.VertexCountPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      annotate_degrees {
        class = "com.intel.spark.graphon.graphstatistics.AnnotateDegreesPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      annotate_weighted_degrees {
        class = "com.intel.spark.graphon.graphstatistics.AnnotateWeightedDegreesPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      graphx_pagerank {
        class = "com.intel.spark.graphon.pagerank.PageRankPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      graphx_connected_components {
        class = "com.intel.spark.graphon.connectedcomponents.ConnectedComponentsPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      graphx_triangle_count {
        class = "com.intel.spark.graphon.trianglecount.TriangleCountPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      hierarchical_clustering{
        class = "com.intel.spark.graphon.hierarchicalclustering.HierarchicalClusteringPlugin"
        config {
          titan = ${intel.analytics.engine.titan}
        }
      }

      rename_graph {
        class = "com.intel.intelanalytics.engine.spark.graph.plugins.RenameGraphPlugin"
        config {
        }
      }

    }
  }
  queries {
    available = []
  }
}


#included so that conf file can be read during unit tests,
#these will not be used when the application is actually running
intel.analytics.engine {
  default-timeout = 30
  titan {}
}