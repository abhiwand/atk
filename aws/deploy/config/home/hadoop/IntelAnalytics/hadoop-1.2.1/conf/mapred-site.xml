<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <property>
        <name>mapred.job.tracker</name>
        <value>master:9001</value>
    </property>

    <property>
        <name>mapred.local.dir</name>
        <value>/mnt/data1/mapred</value>
    </property>

    <property>
        <name>mapred.map.tasks.speculative.execution</name>
        <value>false</value>
        <description>If true, then multiple instances of some map tasks
            may be executed in parallel.
        </description>
    </property>

    <property>
        <name>mapred.reduce.tasks.speculative.execution</name>
        <value>false</value>
        <description>If true, then multiple instances of some reduce tasks
            may be executed in parallel.
        </description>
    </property>

    <property>
        <name>mapred.task.timeout</name>
        <value>1800000</value>
        <description>The number of milliseconds before a task will be
            terminated if it neither reads an input, writes an output, nor
            updates its status string.
        </description>
    </property>

    <property>
        <name>tasktracker.http.threads</name>
        <value>60</value>
        <description>The number of worker threads that for the http server. This is
            used for map output fetching
        </description>
    </property>

    <property>
        <name>mapred.inmem.merge.threshold</name>
        <value>1000</value>
        <description>The threshold, in terms of the number of files
            for the in-memory merge process. When we accumulate threshold number of files
            we initiate the in-memory merge and spill to disk. A value of 0 or less than
            0 indicates we want to DON'T have any threshold and instead depend only on
            the ramfs's memory consumption to trigger the merge.
        </description>
    </property>

    <property>
        <name>mapred.reduce.slowstart.completed.maps</name>
        <value>0.05</value>
        <description>Fraction of the number of maps in the job which should be
            complete before reduces are scheduled for the job.
        </description>
    </property>

    <property>
        <name>mapred.reduce.parallel.copies</name>
        <value>15</value>
        <description>The default number of parallel transfers run by reduce during the copy(shuffle) phase.
        </description>
    </property>

    <property>
        <name>io.sort.factor</name>
        <value>100</value>
        <description>The number of streams to merge at once while sorting files. This determines the number of open file
            handles.
        </description>
    </property>

    <property>
        <name>io.sort.mb</name>
        <value>256</value>
        <description>The total amount of buffer memory to use while sorting files, in megabytes. By default, gives each
            merge stream 1MB, which should minimize seeks.
        </description>
    </property>

    <property>
        <name>io.sort.spill.percent</name>
        <value>0.8</value>
        <description>The soft limit in either the buffer or record collection buffers. Once reached, a thread will begin
            to spill the contents to disk in the background. Note that this does not imply any chunking of data to the
            spill. A value less than 0.5 is not recommended.
        </description>
    </property>

    <property>
        <name>io.sort.record.percent</name>
        <value>0.2</value>
        <description>The percentage of io.sort.mb dedicated to tracking record boundaries. Let this value be r,
            io.sort.mb be x. The maximum number of records collected before the collection thread must block is equal to
            (r * x) / 4
        </description>
    </property>

    <property>
        <name>mapreduce.tasktracker.outofband.heartbeat</name>
        <value>true</value>
        <description>Expert: Set this to true to let the tasktracker send an
            out-of-band heartbeat on task-completion for better latency.
        </description>
    </property>


    <property>
        <name>mapred.reduce.copy.backoff</name>
        <value>5</value>
        <description>The maximum amount of time (in seconds) a reducer spends on
            fetching one map output before declaring it as failed.
        </description>
    </property>

    <property>
        <name>mapred.job.reuse.jvm.num.tasks</name>
        <value>-1</value>
        <description>
            How many tasks to run per jvm. If set to -1, there is
            no limit.
        </description>
    </property>
    <!--
    <property>
     <name>mapred.job.shuffle.merge.percent</name>
     <value>0.66</value>
    </property>
    -->
    <property>
        <name>mapred.job.shuffle.input.buffer.percent</name>
        <value>0.7</value>
        <description>The percentage of memory to be allocated from the maximum heap size to storing map outputs during
            the shuffle.
        </description>
    </property>
    <!--
    <property>
     <name>mapred.job.reduce.input.buffer.percent</name>
     <value>0.9</value>
    </property>
    -->
    <!--property>
     <name>mapred.job.tracker.history.completed.location</name>
     <value>${hadoop.job.history.location}</value>
    </property-->


    <property>
        <name>mapred.tasktracker.map.tasks.maximum</name>
        <value>10</value>
    </property>

    <property>
        <name>mapred.tasktracker.reduce.tasks.maximum</name>
        <value>3</value>
    </property>

    <property>
        <name>mapred.reduce.tasks</name>
        <value>16</value>

    </property>

    <property>
        <name>mapred.child.java.opts</name>
        <value>-Xmx2g -XX:+UseParallelGC -XX:ParallelGCThreads=2 -XX:+UseParallelOldGC -XX:+UseTLAB
            -XX:LargePageSizeInBytes=2048k -XX:+UseLargePages -XX:+UseCompressedOops -XX:+AggressiveOpts
        </value>
    </property>

    <property>
        <name>mapred.map.child.java.opts</name>
        <value>-Xmx2g -XX:+HeapDumpOnOutOfMemoryError</value>
    </property>

    <property>
        <name>mapred.reduce.child.java.opts</name>
        <value>-Xmx8g -XX:+HeapDumpOnOutOfMemoryError</value>
    </property>

    <property>
        <name>mapreduce.job.counters.limit</name>
        <value>12000</value>
        <description>Limit on the number of counters allowed per job.</description>
    </property>

    <property>
        <name>mapred.max.split.size</name>
        <value>41943040</value>
        <description>
            The maximum size chunk that map input should be split
            into. Controls the size of Titan's vertex cache during bulk loads in Graphbuilder.
            Recommended settings. HBase (5-10MB), Cassandra (20-30MB)

            TODO: Delete this setting once TRIB-1908 is committed.
        </description>
    </property>


</configuration>
